<!doctype html>
<html>
    <head>
        <title>GlobeSense</title>
        <link rel="stylesheet" href="/css/home.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    </head>
    <body>
        <nav class="navbar">
            <div class="container-fluid">
                <ul class="navbar-nav d-flex flex-row ms-auto">

        
                    <% if (user) { %>
                        <!-- Dropdown for logged-in user -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" onclick="toggleDropdown()" id="userDropdown">
                                Hello, <%= user.username %>
                            </a>
                            <div class="dropdown-menu" id="dropdown-menu">
                                <a class="dropdown-item" href="/profile">Profile</a>
                                <a class="dropdown-item" href="/account">Account</a>
                                <a class="dropdown-item" href="/settings">Settings</a>
                                <form action="/api/users/logout" method="POST" style="display: inline;">
                                    <input type="hidden" name="_csrf" value="<%= csrf_token %>">
                                    <button type="submit" class="dropdown-item">
                                        Log Out
                                    </button>
                                </form>
                            </div>
                        </li>
                    <% } else {%>
                        <li class="nav-item">
                            <a class="nav-link" href="/login">Sign In</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/register">Create an Account</a>
                        </li>
                        
                        <%} %>
                </ul>
            </div>
        </nav>
        <h1 id="title">GlobeSense!</h1>


        <div class="buttonsContainer">
            <a href="/game"><button class="playButton" id="playClassic">Classic <img class="playIcon" id="globeIcon" src="https://cdn-icons-png.flaticon.com/512/6213/6213305.png"/></button></a>
            <a href="/airport"><button class="playButton" id="playAirport">Airport <img class="playIcon"id="airplaneIcon" src="https://icons.veryicon.com/png/o/miscellaneous/simple-one-line-icon/aircraft-66.png"/></button></a>
            <a href="/mall"><button class="playButton" id="playMall">Mall <img class="playIcon" id="mallIcon" src="https://icons.veryicon.com/png/o/miscellaneous/right-angle-icon/shopping-mall-23.png"/></button></a>
        </div>
        <br><br><br>
        <div id="multiplayer-buttons-label">Multiplayer</div>
        <br>
        <div class="buttonsContainer">
            <a href="/createGame"><button class="playButton">Create a game</button></a>
            <a href="/join"><button class="playButton">Join a game</button></a>
        </div>

        <script> function toggleDropdown() {
            const dropdownMenu = document.getElementById('dropdown-menu');
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        }
        window.onclick = function(event){
            if (!event.target.matches('#userDropdown')) {
                const dropdownMenu = document.getElementById('dropdown-menu');
            
            if (dropdownMenu.style.display === 'block') {
            dropdownMenu.style.display = 'none';
        }

        }
    }


        
        
        </script>
    </body>

</html>
